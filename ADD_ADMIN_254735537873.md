# Adding Admin User 254735537873

## User Details
- **Phone:** `254735537873`
- **Name:** Barman / Admin
- **Role:** OWNER (full dashboard access)
- **Status:** Active

---

## **Option 1: Railway Web Console (Easiest)**

1. Go to [Railway Dashboard](https://railway.app)
2. Select your **destination-cocktails** project
3. Click on the **PostgreSQL** service
4. Go to the **Query** tab
5. Copy and paste this SQL:

```sql
INSERT INTO admin_users (phone_number, name, role, is_active)
VALUES ('254735537873', 'Barman / Admin', 'OWNER', true)
ON CONFLICT (phone_number) DO UPDATE SET
    is_active = true,
    role = 'OWNER',
    name = 'Barman / Admin';

-- Verify it was added
SELECT * FROM admin_users WHERE phone_number = '254735537873';
```

6. Click **Run Query**
7. You should see the new admin user in the results

---

## **Option 2: Railway CLI with Migration Runner**

```bash
# Navigate to your project
cd c:\projects\destination-cocktails

# Connect to Railway
railway connect

# Run the migration
go run cmd/run_migration/main.go migrations/007_add_admin_254735537873.sql
```

---

## **Option 3: Railway CLI Direct SQL**

```bash
# Navigate to your project
cd c:\projects\destination-cocktails

# Connect to Railway and run SQL file
railway run psql -f add_admin_254735537873.sql
```

**OR** run as a one-liner:

```bash
railway run psql -c "INSERT INTO admin_users (phone_number, name, role, is_active) VALUES ('254735537873', 'Barman / Admin', 'OWNER', true) ON CONFLICT (phone_number) DO UPDATE SET is_active = true, role = 'OWNER', name = 'Barman / Admin';"
```

---

## **Option 4: Local Database (if testing locally)**

```bash
# Using the migration runner
go run cmd/run_migration/main.go migrations/007_add_admin_254735537873.sql

# OR using psql directly
psql -U postgres -d destination_cocktails -f add_admin_254735537873.sql
```

---

## **Verification**

After running any of the above options, verify the admin was added:

```sql
SELECT * FROM admin_users WHERE phone_number = '254735537873';
```

Expected result:
- **phone_number:** `254735537873`
- **name:** `Barman / Admin`
- **role:** `OWNER`
- **is_active:** `true`
- **created_at:** (current timestamp)

---

## **Next Steps**

1. ✅ Run one of the options above
2. ✅ Verify the user was added
3. ✅ Test login on the dashboard:
   - Go to your dashboard login page
   - Enter phone: `254735537873`
   - Request OTP (will be sent via WhatsApp)
   - Enter the 6-digit code
   - You should be logged in with full OWNER access

---

## **Files Created**

- [`migrations/007_add_admin_254735537873.sql`](file:///c:/projects/destination-cocktails/migrations/007_add_admin_254735537873.sql) - Version-controlled migration
- [`add_admin_254735537873.sql`](file:///c:/projects/destination-cocktails/add_admin_254735537873.sql) - Quick SQL script
- [`ADD_ADMIN_254735537873.md`](file:///c:/projects/destination-cocktails/ADD_ADMIN_254735537873.md) - This guide

---

## **Troubleshooting**

### "relation 'admin_users' does not exist"
The `admin_users` table hasn't been created yet. Run the initial migration first:
```bash
go run cmd/run_migration/main.go migrations/004_create_admin_users.sql
```

### "OTP not received"
- Check that WhatsApp integration is working
- Verify the phone number format is correct (no + prefix in database)
- Check backend logs for OTP sending errors

### "Unauthorized: admin user not found"
- Verify the user exists: `SELECT * FROM admin_users WHERE phone_number = '254735537873';`
- Check `is_active = true`
- Ensure no typos in phone number
